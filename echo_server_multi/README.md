# Реализация эхо-сервера

___

## Команды

+ exit - разрывает соединения со стороны клиента.
+ stop - завершает работу сервера.
___
# Задания для выполнения

### 1. Создать простой TCP-сервер, который принимает от клиента строку (порциями по 1 КБ) и возвращает ее. (Эхо-сервер).

### 2. Сервер должен выводить в консоль служебные сообщения (с пояснениями) при наступлении любых событий:

+ Запуск сервера;
+ Начало прослушивания порта;
+ Подключение клиента;
+ Прием данных от клиента;
+ Отправка данных клиенту;
+ Отключение клиента;
+ Остановка сервера.

___

### Клиент выводит в консоль служебные сообщения (с пояснениями) при наступлении любых событий:

+ Соединение с сервером;
+ Разрыв соединения с сервером;
+ Отправка данных серверу;
+ Прием данных от сервера.

___

### Контрольные вопросы

+ Чем отличаются клиентские и серверные сокеты?
    + серверные сокеты - это сокет, имеющий определенный IP-адрес, предполагающий обмен данными с клиентом. Может
      работать с несколькими клиентами одновременно.
    + клиентские сокеты - может запускаться на любом устройстве и должен знать IP-адрес сервера, отправляет запрос на
      сервер.
+ Как можно передавать через сокеты текстовую информацию?
    + После запроса текстовой информации, она преобразовывается в байтовый вид encode() и отправляется на сервер с
      помощью метода send()/
+ Какие операции с сокетами блокируют выполнение программы?
    + accept(), connect() и recv(). Это значит, что после их вызова выполнение программы остановится и не возобновится
      до тех пор, пока не поступят соответствующие данные из сети. А если программа не выполняется, то и другие
      соединения и задачи также не обрабатываются.
+ Что такое неблокирующие сокеты?
    + функция чтения проверяет, есть ли данные в буфере, и если есть - сразу возвращает, если нет, то она не ждет и
      также сразу возвращает, что прочитано 0 байт.
+ В чем преимущества и недостатки использования TCP по сравнению с UDP?
    + UDP - потоковый, быстрый протокол передачи данных без гарантии целостности данных.
    + TCP - диалоговый, более медленный, гарантирует целостность данных.
+ Какие системные вызовы, связанные с сокетами используются только на стороне сервера?
    + socket() - создание нового сокета;
    + bind() - привязка сокета к IP-адресу и порту сервера;
    + listen() - перевод сокета в режим прослушивания новых соединений;
    + accept() - прием нового соединения от клиента и создание нового сокета для общения с клиентом;
    + recv() и send() - чтение данных из сокета и отправка данных через сокет.
+ На каком уровне модели OSI работают сокеты?
    + Транспортный уровень.
+ Почему однопоточное приложение не может решить задачу одновременного подключения?
    + Однопоточное приложение по определению может выполнять только одну задачу в единицу времени, так как оно
      использует только один поток исполнения. При подключении нескольких клиентов к серверу, каждый из них создает
      новое соединение и требует обработки от серверной программы. Однопоточная программа может обрабатывать запросы
      клиентов только последовательно, по очереди, блокируя одни запросы и ждущая завершения других. В результате, если
      клиентов будет много или один клиент будет посылать большой объем данных, которые будут долго
      обрабатываться на стороне сервера, то все остальные клиенты будут вынуждены ждать своей очереди на обработку
      запроса.
      Таким образом, приложение не сможет решить задачу одновременного подключения и обработки запросов от множества
      клиентов. Для решения данной проблемы нужно использовать многопоточность, разделяя обработку запросов от разных
      клиентов по нескольким потокам исполнения.
+ Чем поток отличается от процесса?
    + Основное отличие между потоком и процессом заключается в том, что процесс - это выполнение программы в оперативной
      памяти компьютера, а поток - это отдельный управляемый поток выполнения, который может существовать в рамках
      одного процесса. Потоки используют общие ресурсы процесса и могут параллельно выполняться на нескольких ядрах
      процессора, что позволяет увеличить производительность приложений.
+ Как создать новый поток?
    + Создание нового потока с помощью Thread() и запуск вызываемого объекта в отдельном потоке Thread().start()
+ В чем проблема потокобезопасности?
    + Проблема потокобезопасности может возникнуть, когда несколько потоков одновременно обращаются к одним и тем же
      данным или ресурсам, что может привести к непредсказуемому поведению или даже ошибкам в работе программы.
+ Какие методы обеспечения потокобезопасности существуют?
    + threading - это модуль в языке программирования Python, который позволяет создавать и управлять потоками
      выполнения в многопоточных приложениях.
    + lock - это примитив синхронизации: механизм, обеспечивающий ограничения доступа к ресурсу при наличии множества
      потоков выполнения.

___

### Выполненные задания

+ Проверьте возможность подключения к серверу с локальной, виртуальной и удаленной машины.
+ Модифицируйте код сервера таким образом, чтобы он читал строки в цикле до тех пор, пока клиент не введет “exit”. Можно
  считать, что это команда разрыва соединения со стороны клиента.
+ Модифицируйте код сервера таким образом, чтобы при разрыве соединения клиентом он продолжал слушать данный порт и,
  таким образом, был доступен для повторного подключения.
+ Модифицируйте код клиента и сервера таким образом, чтобы номер порта и имя хоста (для клиента) они спрашивали у
  пользователя. Реализовать безопасный ввод данных и значения по умолчанию.
+ Модифицировать код сервера таким образом, чтобы все служебные сообщения выводились не в консоль, а в специальный
  лог-файл.
+ Модифицируйте код сервера таким образом, чтобы он автоматически изменял номер порта, если он уже занят. Сервер должен
  выводить в консоль номер порта, который он слушает.
+ Реализовать сервер идентификации. Сервер должен принимать соединения от клиента и проверять, известен ли ему уже этот
  клиент (по IP-адресу). Если известен, то поприветствовать его по имени. Если неизвестен, то запросить у пользователя
  имя и записать его в файл. Файл хранить в произвольном формате.
+ Реализовать сервер аутентификации. Похоже на предыдущее задание, но вместе с именем пользователя сервер отслеживает и
  проверяет пароли. Дополнительные баллы за безопасное хранение паролей. Дополнительные баллы за поддержание сессии на
  основе токена наподобие cookies
+ Напишите вспомогательные функции, которые реализуют отправку и принятие текстовых сообщений в сокет. Функция отправки
  должна дополнять сообщение заголовком фиксированной длины, в котором содержится информация о длине сообщения. Функция
  принятия должна читать сообщение с учетом заголовка. В дополнении реализуйте преобразование строки в байтовый массив и
  обратно в этих же функциях. Дополнително оценивается, если эти функции будут реализованы как унаследованное расширение
  класса socket библиотеки socket.
+ Дополните код клиента и сервера таким образом, чтобы они могли посылать друг другу множественные сообщения один в
  ответ на другое.
+ Напишите многопользовательский чат. Подсказка: используйте сокеты, основанные на протоколе UDP.
+ Реализовать сканер TCP-портов. Программа должна запрашивать имя хоста/IP-адрес у пользователя. Затем программа должна
  пробовать подключиться к этому хосту ко всем портами по очереди. При успешном подключении программа должна выводить в
  консоль сообщение “Порт N открыт”.
    + Модифицировать эту программу, чтобы сканирование портов происходило параллельно. Для этого нужно распараллелить
      сканирование портов по нескольким потокам.
    + Обеспечить вывод списка открытых портов по порядку.
+ Модифицировать простой эхо-сервер таким образом, чтобы при подключении клиента создавался новый поток, в котором
  происходило взаимодействие с ним.
+ Реализовать простой чат сервер на базе сервера аутентификации. Сервер должен обеспечивать подключение многих
  пользователей одновременно, отслеживание имен пользователей, поддерживать историю сообщений и пересылку сообщений от
  каждого пользователя всем остальным.